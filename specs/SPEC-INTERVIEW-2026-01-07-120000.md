# TalkFlow UI Redesign - Spec Interview

**Date:** January 7, 2026
**Topic:** Unified main window with WisprFlow-inspired design

---

## Overview

Redesign TalkFlow's user interface to create a more polished, spacious look inspired by WisprFlow. The main changes involve consolidating separate windows into a single unified window with sidebar navigation, applying a cleaner visual treatment with nice gray tones, and improving the overall spacing and layout.

---

## Requirements

### Explicit Requirements

1. **Single unified main window** with sidebar navigation (replacing separate History/Settings windows)
2. **Three navigation sections:**
   - History (waveform icon) - primary tab
   - Dictionary (book icon)
   - Settings (gear icon) - bottom-anchored, smaller prominence
3. **TalkFlow branding** at the top of the sidebar (app icon + name)
4. **WisprFlow-inspired visual styling:**
   - Light gray tones (designer discretion on exact shades)
   - Subtle rounding on content area (4-6pt radius)
   - Inset content area with slightly different background
   - More spacious layout
5. **Quick-start tip card** always visible in History tab (explaining the shortcut)
6. **Relative timestamps** for transcription items (e.g., "2 hours ago")
7. **Full transcription text** shown in list (no truncation)
8. **Empty state** with illustration/icon and helpful message
9. **Settings displayed as tabs** within the content area (General, Audio, Transcription, Appearance)
10. **Light theme only** for initial implementation

### Implicit Requirements

1. Preserve existing floating status indicator during recording
2. Maintain all keyboard shortcuts and their behavior
3. Menu bar dropdown should have "Open TalkFlow" item (opens unified window)
4. Window auto-opens on app launch
5. Resizable window with minimum size (600x400)
6. Clean code migration - remove old HistoryWindow/SettingsWindow code

---

## Technical Decisions

### Architecture

- **Enhance existing `MainWindowView.swift`** - already has the basic structure with NavigationSplitView
- **Remove old window files:**
  - `HistoryWindow.swift`
  - `SettingsWindow.swift`
  - `DictionaryWindow.swift`
- **Update `MenuBarMenu.swift`** to simplify to "Open TalkFlow" + quick actions
- **Update `MenuBarController.swift`** for new window management

### Visual Hierarchy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [App Icon] TalkFlow                          [Window Controls]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              â”‚                                               â”‚
â”‚  ğŸµ History  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚              â”‚  â”‚  Quick-start tip card (always visible)  â”‚  â”‚
â”‚  ğŸ“– Dictionaryâ”‚  â”‚  "Hold âŒ˜ Right Arrow to dictate..."    â”‚  â”‚
â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚              â”‚                                               â”‚
â”‚              â”‚  Transcription History                        â”‚
â”‚              â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚              â”‚                                               â”‚
â”‚              â”‚  2 hours ago                                  â”‚
â”‚              â”‚  Full transcription text shown here...        â”‚
â”‚              â”‚                                               â”‚
â”‚              â”‚  Yesterday at 3pm                             â”‚
â”‚              â”‚  Another transcription text...                â”‚
â”‚              â”‚                                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚                                               â”‚
â”‚  âš™ï¸ Settings â”‚                                               â”‚
â”‚              â”‚                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Color Palette (Guidelines)

- **Sidebar background:** Light gray (~#F5F5F5 or NSColor.windowBackgroundColor)
- **Content background:** Slightly different shade (~#FAFAFA or white)
- **Selected item:** Subtle darker gray background with opacity
- **Dividers:** Very light gray (#E5E5E5)
- **Text:** Standard system colors for primary/secondary
- **Icons:** SF Symbols in secondary color, darker when selected

### Typography

- App title: System font, semibold
- Tab labels: System font, regular
- Section headers: Title2, semibold
- Body text: System default
- Timestamps: Caption, secondary color

---

## Data Model

No changes to data model. Existing `TranscriptionRecord` and `DictionaryTerm` models remain unchanged.

### New State Requirements

- `@AppStorage("hasSeenQuickStartTip")` - track if tip was shown (though tip is always visible per requirements)
- Window size/position persistence via standard NSWindow restoration

---

## User Flows

### App Launch Flow

1. App launches â†’ Menu bar icon appears
2. Main window automatically opens (or brought to front if exists)
3. Window shows History tab by default
4. Quick-start tip card visible at top

### Navigation Flow

1. User clicks sidebar item â†’ Content area updates
2. Settings item at bottom â†’ Shows tabbed settings view
3. Window remains open until explicitly closed

### Menu Bar Interaction

1. User clicks menu bar icon â†’ Dropdown appears
2. Recent transcriptions shown (clickable to copy)
3. "Open TalkFlow" opens/focuses main window
4. "Quit TalkFlow" exits app

### Recording Flow (Unchanged)

1. User holds shortcut key â†’ Floating indicator appears
2. Recording in progress â†’ Indicator shows state
3. User releases â†’ Transcription happens
4. Result pasted â†’ Entry appears in History (if window open, list updates)

---

## Edge Cases

### Empty States

| Scenario | Display |
|----------|---------|
| No transcriptions | Illustration + "No Transcriptions Yet" + subtitle |
| No search results | "No Results" + search query shown |
| Dictionary empty | Illustration + "Custom Dictionary" + helpful text + examples |

### Window States

| Scenario | Behavior |
|----------|----------|
| Window closed, app running | Menu bar active, click opens window |
| Window minimized | Can be restored from Dock |
| Multiple displays | Window appears on primary display |
| Full screen | Not supported (standard window only) |

### Data Refresh

- History list should update when new transcription is added
- Use existing `@Observable` pattern for reactive updates
- No manual refresh needed

---

## Error Handling

No new error scenarios introduced. Existing error handling for:
- Dictionary operations (add/edit/delete)
- History operations (delete)

Remains unchanged.

---

## Open Questions

1. **Exact shade of grays** - Left to implementation discretion ("clean and professional")
2. **Transition animations** - Should tab switches animate? (Suggest: use default SwiftUI transitions)
3. **Window title** - Show "TalkFlow" in title bar or just rely on sidebar branding?

---

## Out of Scope

1. **Dark mode support** - Light theme only for this iteration
2. **Usage statistics** - No word count, WPM, streak display
3. **Profile/notification features** - Not needed (menu bar handles system integration)
4. **Promotional cards** - No team/upsell features
5. **Date grouping headers** - Using relative timestamps instead

---

## Phased Implementation Plan

### Phase 1: Sidebar Visual Redesign
**Goal:** Transform the existing sidebar into the WisprFlow-inspired design

**Scope:**
- Update `MainWindowView.swift` sidebar styling
- Add TalkFlow branding header to sidebar
- Move Settings to bottom-anchored position
- Update icons (waveform for History, book for Dictionary, gear for Settings)
- Apply gray color scheme and spacing
- Add selected state styling

**Dependencies:** None

**Deliverables:**
- Updated `MainWindowView.swift` with new sidebar design
- Custom sidebar item views with proper styling

**Acceptance Criteria:**
- Sidebar shows app branding at top
- Three navigation items with icons in correct positions
- Settings anchored at bottom, separated from main nav
- Selected item has subtle gray background highlight
- Proper spacing between elements

**Risks & Mitigations:**
1. NavigationSplitView limitations â†’ May need custom sidebar implementation
2. Icon sizing inconsistency â†’ Test with different system text sizes

---

### Phase 2: Content Area Redesign
**Goal:** Create the inset content area with proper visual treatment

**Scope:**
- Add subtle background color difference for content area
- Apply 4-6pt corner radius to content area
- Improve spacing and padding throughout
- Update header styling in each content view

**Dependencies:** Phase 1 (sidebar must be styled first)

**Deliverables:**
- Updated content area styling
- Consistent header treatment across all tabs

**Acceptance Criteria:**
- Content area has visible "inset" appearance
- Subtle corner rounding visible
- Proper padding/margins around content
- Headers styled consistently

**Risks & Mitigations:**
1. Background color contrast issues â†’ Test on different monitors
2. Corner radius clipping â†’ Test with scrollable content

---

### Phase 3: History Tab Enhancement
**Goal:** Improve History tab with tip card and better list styling

**Scope:**
- Add always-visible quick-start tip card
- Update transcription list to show full text
- Change timestamps to relative format
- Improve empty state with illustration
- Update row styling for cleaner look

**Dependencies:** Phase 2 (content area must be styled)

**Deliverables:**
- New `QuickStartTipCard` view
- Updated `HistoryContentView` with tip card integration
- Updated row views with relative timestamps
- New empty state view with illustration

**Acceptance Criteria:**
- Yellow/cream tip card always visible at top of History
- Tip card shows correct shortcut and helpful text
- Transcription text shown in full (no truncation)
- Timestamps show "2 hours ago", "Yesterday at 3pm" format
- Empty state shows waveform/speech bubble icon with message

**Risks & Mitigations:**
1. Long transcriptions making list unwieldy â†’ Consider max-height with scrollable row if needed
2. Performance with many full-text items â†’ Test with 100+ transcriptions

---

### Phase 4: Dictionary Tab Styling
**Goal:** Align Dictionary tab with new visual language

**Scope:**
- Apply same styling treatment as History
- Update empty state illustration
- Ensure consistent search bar styling

**Dependencies:** Phase 3 (for styling consistency reference)

**Deliverables:**
- Updated `DictionaryContentView` and `DictionaryView` styling

**Acceptance Criteria:**
- Dictionary matches History tab visual treatment
- Empty state has appropriate illustration
- Search bar styled consistently

**Risks & Mitigations:**
1. Style drift between tabs â†’ Use shared style constants

---

### Phase 5: Settings Tab Redesign
**Goal:** Settings displayed as tabs within content area

**Scope:**
- Update Settings to use horizontal tabs/segmented control
- Ensure proper spacing in each settings section
- Style tab picker appropriately

**Dependencies:** Phase 2

**Deliverables:**
- Updated `SettingsContentView` with tabbed layout

**Acceptance Criteria:**
- Settings shows as tabs (General, Audio, Transcription, Appearance)
- Tab switching works correctly
- Content scrolls if needed within tab

**Risks & Mitigations:**
1. TabView styling limitations â†’ May need custom segmented control

---

### Phase 6: Menu Bar & Window Management
**Goal:** Update menu bar and window behavior

**Scope:**
- Simplify `MenuBarMenu.swift` to have "Open TalkFlow" item
- Update `MenuBarController.swift` for unified window
- Remove old window opening code
- Implement auto-open on launch
- Set window minimum size (600x400)
- Enable window resizing with size persistence

**Dependencies:** Phase 5 (all content must be ready)

**Deliverables:**
- Updated `MenuBarMenu.swift`
- Updated `MenuBarController.swift`
- Updated `TalkFlowApp.swift` or `AppDelegate.swift` for launch behavior

**Acceptance Criteria:**
- Menu bar click shows dropdown with "Open TalkFlow"
- Recent transcriptions still clickable to copy
- Window opens automatically on app launch
- Window resizable with minimum size enforced
- Window size remembered between launches

**Risks & Mitigations:**
1. Window restoration conflicts â†’ Test with NSWindowRestoration

---

### Phase 7: Cleanup & Polish
**Goal:** Remove old code and final polish

**Scope:**
- Delete `HistoryWindow.swift`, `SettingsWindow.swift`, `DictionaryWindow.swift`
- Remove any orphaned references
- Final visual polish and spacing adjustments
- Code cleanup and documentation

**Dependencies:** Phase 6 (all functionality must be working)

**Deliverables:**
- Deleted old window files
- Cleaned up imports and references
- Updated any affected tests

**Acceptance Criteria:**
- Old window files removed
- No compiler warnings from orphaned references
- App builds and runs correctly
- All existing tests pass

**Risks & Mitigations:**
1. Hidden dependencies on old code â†’ Search codebase thoroughly before deletion

---

## Implementation Notes

### Key Files to Modify

1. **`TalkFlow/UI/MainWindow/MainWindowView.swift`** - Primary work location
2. **`TalkFlow/UI/MenuBar/MenuBarMenu.swift`** - Simplify menu items
3. **`TalkFlow/UI/MenuBar/MenuBarController.swift`** - Window management
4. **`TalkFlow/App/TalkFlowApp.swift`** - Launch behavior
5. **`TalkFlow/App/AppDelegate.swift`** - May need window lifecycle updates

### Files to Delete

1. `TalkFlow/UI/History/HistoryWindow.swift`
2. `TalkFlow/UI/Settings/SettingsWindow.swift`
3. `TalkFlow/UI/Dictionary/DictionaryWindow.swift`

### SwiftUI Considerations

- Use `Color(nsColor:)` for NSColor interop with light gray shades
- Consider `.background()` modifier with custom shapes for inset look
- Use `@Environment(\.colorScheme)` if dark mode added later
- Leverage `NavigationSplitView` column width customization

### Testing

- Test window resizing at various sizes
- Test on external monitors
- Verify transcription list performance with many items
- Test menu bar interactions
- Verify keyboard shortcuts still work during and after redesign

### Accessibility

- Ensure all elements remain keyboard-navigable
- Maintain VoiceOver compatibility
- Test with increased text sizes
- Verify sufficient color contrast

---

## Summary of Key Decisions

| Decision | Choice | Rationale |
|----------|--------|-----------|
| Window model | Single unified window | Matches WisprFlow, cleaner UX |
| History icons | Waveform | Emphasizes voice/audio nature of app |
| Settings position | Bottom-anchored | Like WisprFlow, clear visual hierarchy |
| Tip card visibility | Always visible | Helps occasional users remember shortcut |
| Timestamps | Relative only | Cleaner, more natural language |
| Text display | Full text | User preference, shows complete context |
| Dark mode | Deferred | Focus on getting light theme right first |
| Visual fidelity | Inspired, not exact | Flexibility for macOS conventions |
